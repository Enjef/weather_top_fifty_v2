# Проект: weather_top_fifty
Проект cобирает данные и сохраняет их в базе о погоде в 50 крупнейших городах
мира, на основании этих данных будет происходить управление охлаждением
и нагрузкой Дата-центров.

### Описание
Проект написан с использованием асинхронности, запрос на api https://openweathermap.org/
осуществляется раз в час с помощью экземпляра класса Collector.
Collector при создании экземпляра использует API-KEY, функцию api_get и
data_insert это позволяет использовать его с разными видами API.

Openweathermap предоставляет разнообразные погодные и астрономические данные,
которые могут быть использованы в дальнейшем для решения возникающих задач.
Для этого нужно создать новую таблицу в базе с необходимыми полями,
написать функцию api_get для запроса данных и функцию data_insert для сохранения
данных в базу и использовать эти функции в коллекторе.

Сейчас база городов формируется из списка 50 крупнейших по населению городов
по данным википедии.
По этому списку подтягиваются координаты из списка 372 крупнейших городов (файл
с сайта openweathermap).
В дальнейшем можно дополнить таблицу сity различными показателями и периодически
их обновлять. Если критерий вхождения в топ будет меняться, то лучше перенести
критерий в конструктор класса, и использовать его для формирования актуального
списка городов.


### Технологии
Использовал последние версии:
- Python 3.9.13
- aiohttp 3.8.4
- asyncpg 0.27.0
- docker-compose 3.8
- postgres:12.4

Ключи и пароли не скрыты для демонстрации работы коллектора в упрощенном формате.

### Запуск проекта
Выполните команду:
```
docker-compose up -d
docker-compose exec weather python db_initial.py
docker-compose exec weather python collector.py
```

### Optional
Убедиться что данные сохраняются в можно запросом к базе в образе.
```
docker-compose exec -it db psql -U postgres -c 'SELECT * FROM weather;'
```
